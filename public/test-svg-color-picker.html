<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Color Picker Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f0f0;
        }
        .test-container {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .color-picker-container {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .log {
            background: #f8f8f8;
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-weight: bold;
        }
        .status.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .status.warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        .simplified-color-picker {
            display: inline-block;
            margin: 10px;
        }
    </style>
</head>
<body>
    <h1>üé® SVG Color Picker Test</h1>
    <p>This page tests whether the SVG color picker is working correctly for solid colors vs gradients.</p>

    <div class="test-container">
        <h2>Test 1: Check if Gradient Color Picker is Loaded</h2>
        <div id="gradientPickerStatus" class="status warning">Checking...</div>
        <button onclick="checkGradientPicker()">Recheck Gradient Picker</button>
    </div>

    <div class="test-container">
        <h2>Test 2: Check Original HTML Color Input</h2>
        <div class="color-picker-container">
            <label>Original HTML Color Input:</label>
            <div class="simplified-color-picker">
                <input type="color" id="originalColorInput" value="#ff0000">
            </div>
            <div id="originalColorStatus" class="status warning">Not tested</div>
        </div>
    </div>

    <div class="test-container">
        <h2>Test 3: Check if iImageColor Element Exists</h2>
        <div id="iImageColorStatus" class="status warning">Checking...</div>
        <button onclick="checkImageColorElement()">Check iImageColor Element</button>
    </div>

    <div class="test-container">
        <h2>Test 4: Check if SVG Gradient Picker is Created</h2>
        <div id="svgGradientPickerStatus" class="status warning">Checking...</div>
        <button onclick="checkSvgGradientPicker()">Check SVG Gradient Picker</button>
    </div>

    <div class="test-container">
        <h2>Console Log</h2>
        <div class="log" id="consoleLog"></div>
        <button onclick="clearLog()">Clear Log</button>
    </div>

    <!-- Load required scripts -->
    <script src="/js/gradient-color-picker.js"></script>
    
    <script>
        function log(message) {
            const logElement = document.getElementById('consoleLog');
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
            console.log(message);
        }

        function clearLog() {
            document.getElementById('consoleLog').textContent = '';
        }

        function setStatus(elementId, type, message) {
            const element = document.getElementById(elementId);
            element.className = `status ${type}`;
            element.textContent = message;
        }

        function checkGradientPicker() {
            log('Checking if GradientColorPicker is loaded...');
            
            if (typeof GradientColorPicker === 'undefined') {
                setStatus('gradientPickerStatus', 'error', '‚ùå GradientColorPicker is NOT loaded');
                log('‚ùå GradientColorPicker is undefined');
            } else {
                setStatus('gradientPickerStatus', 'success', '‚úÖ GradientColorPicker is loaded');
                log('‚úÖ GradientColorPicker is available');
                log('GradientColorPicker constructor: ' + typeof GradientColorPicker);
            }
        }

        function checkImageColorElement() {
            log('Checking for iImageColor element...');
            
            const iImageColor = document.getElementById('iImageColor');
            if (iImageColor) {
                setStatus('iImageColorStatus', 'success', '‚úÖ iImageColor element found');
                log('‚úÖ iImageColor element exists');
                log('iImageColor display style: ' + iImageColor.style.display);
                log('iImageColor value: ' + iImageColor.value);
            } else {
                setStatus('iImageColorStatus', 'error', '‚ùå iImageColor element NOT found');
                log('‚ùå iImageColor element does not exist');
            }
        }

        function checkSvgGradientPicker() {
            log('Checking for svgGradientPicker element...');
            
            const svgGradientPicker = document.getElementById('svgGradientPicker');
            if (svgGradientPicker) {
                setStatus('svgGradientPickerStatus', 'success', '‚úÖ svgGradientPicker element found');
                log('‚úÖ svgGradientPicker element exists');
                log('svgGradientPicker innerHTML length: ' + svgGradientPicker.innerHTML.length);
            } else {
                setStatus('svgGradientPickerStatus', 'error', '‚ùå svgGradientPicker element NOT found');
                log('‚ùå svgGradientPicker element does not exist');
            }
        }

        // Test original color input
        document.getElementById('originalColorInput').addEventListener('input', function(e) {
            log('Original color input changed to: ' + e.target.value);
            setStatus('originalColorStatus', 'success', '‚úÖ Original color input working: ' + e.target.value);
        });

        // Run initial checks
        window.addEventListener('load', function() {
            log('Page loaded, running initial checks...');
            checkGradientPicker();
            checkImageColorElement();
            checkSvgGradientPicker();
        });
    </script>
</body>
</html>
